# FinPi: –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –≤–µ–±-—Å–∫—Ä–∞–ø–µ—Ä

–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –≤–µ–±-—Å–∫—Ä–∞–ø–µ—Ä –¥–ª—è —Å–±–æ—Ä–∞ –∏ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞–∑–≤–∞–Ω–∏–π —Ç–æ–≤–∞—Ä–æ–≤ —Å –≤–µ–±-—Å–∞–π—Ç–æ–≤. –ü—Ä–æ–µ–∫—Ç –ø—Ä–æ—à–µ–ª –ø–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏.

## –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

-   **üöÄ –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `asyncio` –∏ `aiohttp` –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–∫–æ—Ä—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö.
-   **üß† –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ü—Ä–∏–º–µ–Ω—è–µ—Ç NLP-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (`spaCy`, `nltk`) –¥–ª—è –ª–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (–ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è —Å–ª–æ–≤ –∫ –±–∞–∑–æ–≤–æ–π —Ñ–æ—Ä–º–µ), —á—Ç–æ –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤.
-   **ü§ñ –£–º–Ω—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –Ω–µ—Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã, –Ω–∞—Ö–æ–¥–∏—Ç —É—Å—Ç–æ–π—á–∏–≤—ã–µ —Å–ª–æ–≤–æ—Å–æ—á–µ—Ç–∞–Ω–∏—è (N-–≥—Ä–∞–º–º—ã) –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∏—Ö –≤ –∫–∞—á–µ—Å—Ç–≤–µ –Ω–æ–≤—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤.
-   **üõ°Ô∏è –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:** –í–Ω–µ–¥—Ä–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ (`retry`) –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, —á—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∞–ø–µ—Ä —É—Å—Ç–æ–π—á–∏–≤—ã–º –∫ –≤—Ä–µ–º–µ–Ω–Ω—ã–º —Å–±–æ—è–º —Å–µ—Ç–∏.
-   **üß© –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –õ–æ–≥–∏–∫–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∞–π—Ç–∞ –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å-–ø–∞—Ä—Å–µ—Ä, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–∞–π—Ç–æ–≤ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö.
-   **‚úçÔ∏è –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è:** –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç "–Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ" –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, "—Å–∏—Ä–æ–ø —Å–æ –≤–∫—É—Å–æ–º –≤–∏—Å–∫–∏").
-   **‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ù–∞–ø–∏—Å–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã (`pytest`) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∫–ª—é—á–µ–≤–æ–π –ª–æ–≥–∏–∫–∏.
-   **üìú –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –í—Å—è —Ä–∞–±–æ—Ç–∞ —Å–∫—Ä–∞–ø–µ—Ä–∞ –ø–æ–¥—Ä–æ–±–Ω–æ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ —Ñ–∞–π–ª –∏ –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å –≤ —É–¥–æ–±–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
finpi_scraper/
‚îú‚îÄ‚îÄ scrapers/               # –ö–ª–∞—Å—Å—ã-–ø–∞—Ä—Å–µ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∞–π—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py         # –§–∞–±—Ä–∏–∫–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–∞—Ä—Å–µ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ base_scraper.py     # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ utils/                  # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ categorization.py   # –õ–æ–≥–∏–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ clean_products.py   # –û—á–∏—Å—Ç–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏–π —Ç–æ–≤–∞—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ keyword_extractor.py# –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ lemmatizer.py       # –ú–æ–¥—É–ª—å –¥–ª—è –ª–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (spaCy)
‚îú‚îÄ‚îÄ keywords/               # –§–∞–π–ª—ã —Å –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ alcohol_keywords.json
‚îÇ   ‚îî‚îÄ‚îÄ stopwords.json
‚îú‚îÄ‚îÄ tests/                  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ test_clean_products.py
‚îú‚îÄ‚îÄ output/                 # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚îú‚îÄ‚îÄ main.py                 # –û—Å–Ω–æ–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ config.json             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∞–π—Ç–æ–≤ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
‚îú‚îÄ‚îÄ requirements.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îî‚îÄ‚îÄ scraper.log             # –§–∞–π–ª —Å –ª–æ–≥–∞–º–∏ —Ä–∞–±–æ—Ç—ã
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```bash
    git clone <repository-url>
    cd 01_scraper
    ```

2.  **–°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
    ```bash
    python3 -m venv venv
    source venv/bin/activate
    ```

3.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
    ```bash
    pip install -r finpi_scraper/requirements.txt
    ```

4.  **–ó–∞–≥—Ä—É–∑–∏—Ç–µ NLP-–º–æ–¥–µ–ª–∏:**
    –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π `spaCy`:
    ```bash
    python3 -m spacy download en_core_web_sm
    python3 -m spacy download de_core_news_sm
    python3 -m spacy download ru_core_news_sm
    python3 -m spacy download uk_core_news_sm
    ```
    –ò –¥–∞–Ω–Ω—ã–µ –¥–ª—è `nltk`:
    ```bash
    python3 -c "import nltk; nltk.download('stopwords'); nltk.download('punkt')"
    ```

5.  **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ API-–∫–ª—é—á:**
    –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `finpi_scraper/.env` –ø–æ –ø—Ä–∏–º–µ—Ä—É `finpi_scraper/.env.example` –∏ –≤–ø–∏—à–∏—Ç–µ –≤–∞—à –∫–ª—é—á –æ—Ç [ScraperAPI](https://scraperapi.com).
    ```
    SCRAPERAPI_KEY="–í–ê–®_API_–ö–õ–Æ–ß"
    ```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –¥–ª—è –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–∞–π—Ç–æ–≤
–ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –¥–ª—è –≤—Å–µ—Ö —Å–∞–π—Ç–æ–≤, —É –∫–æ—Ç–æ—Ä—ã—Ö –≤ `config.json` —Å—Ç–æ–∏—Ç `"enabled": true`:
```bash
python3 finpi_scraper/main.py
```

### –ó–∞–ø—É—Å–∫ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–∞–π—Ç–∞
–ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–¥–Ω–æ–≥–æ —Å–∞–π—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –µ–≥–æ `site_name` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞:
```bash
# –ü—Ä–∏–º–µ—Ä –¥–ª—è 'rost'
python3 finpi_scraper/main.py rost
```

## –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Å–∞–π—Ç?

1.  **–°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å-–ø–∞—Ä—Å–µ—Ä:** –í –ø–∞–ø–∫–µ `finpi_scraper/scrapers/` —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ñ–∞–π–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä, `my_site_scraper.py`. –í –Ω–µ–º —Å–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å, —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–Ω—ã–π –æ—Ç `BaseScraper`.
2.  **–†–µ–∞–ª–∏–∑—É–π—Ç–µ –ª–æ–≥–∏–∫—É:** –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –º–µ—Ç–æ–¥ `get_page_url` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–∞–≥–∏–Ω–∞—Ü–∏–∏. –õ–æ–≥–∏–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π (`parse`) —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ –±–∞–∑–æ–≤–æ–º –∫–ª–∞—Å—Å–µ –∏ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã.
3.  **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –ø–∞—Ä—Å–µ—Ä:** –í `finpi_scraper/scrapers/__init__.py` –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤–∞—à –Ω–æ–≤—ã–π –∫–ª–∞—Å—Å –∏ –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ —Å–ª–æ–≤–∞—Ä—å `SCRAPER_CLASSES`.
4.  **–î–æ–±–∞–≤—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:** –í `finpi_scraper/config.json` –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –¥–ª—è –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞ (URL, —Å–µ–ª–µ–∫—Ç–æ—Ä—ã, —è–∑—ã–∫ –∏ —Ç.–¥.).

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, `clean_products`):
```bash
pytest finpi_scraper/tests/
```